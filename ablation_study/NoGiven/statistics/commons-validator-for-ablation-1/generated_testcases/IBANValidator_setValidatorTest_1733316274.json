[{"strategy": "retry", "code": "\npackage org.apache.commons.validator.routines;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\nimport static org.junit.jupiter.api.Assertions.assertNull;\nimport static org.junit.jupiter.api.Assertions.assertThrows;\nimport static org.junit.jupiter.api.Assertions.assertTrue;\n\nimport org.apache.commons.validator.routines.IBANValidator.Validator;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\npublic class IBANValidator_setValidatorTest {\n\n    private IBANValidator validator;\n\n    @BeforeEach\n    public void setUp() {\n        validator = new IBANValidator();\n    }\n\n    @Test\n    public void testSetValidator_Success() {\n        Validator newValidator = validator.setValidator(\"XX\", 22, \"XX\\\\d{20}\");\n        assertNotNull(newValidator);\n\n        Validator retrievedValidator = validator.getValidator(\"XX\");\n        assertNotNull(retrievedValidator);\n        assertEquals(22, retrievedValidator.getIbanLength());\n        assertTrue(retrievedValidator.getRegexValidator().isValid(\"XX12345678901234567890\"));\n    }\n\n    @Test\n    public void testSetValidator_Remove() {\n        validator.setValidator(\"XX\", 22, \"XX\\\\d{20}\");\n        Validator removedValidator = validator.setValidator(\"XX\", -1, null);\n        assertNotNull(removedValidator);\n\n        Validator retrievedValidator = validator.getValidator(\"XX\");\n        assertNull(retrievedValidator);\n    }\n\n    @Test\n    public void testSetValidator_SingletonModification() {\n        IBANValidator defaultValidator = IBANValidator.getInstance();\n        assertThrows(IllegalStateException.class, () -> {\n            defaultValidator.setValidator(\"XX\", 22, \"XX\\\\d{20}\");\n        });\n    }\n\n    @Test\n    public void testSetValidator_InvalidCountryCode() {\n        assertThrows(IllegalArgumentException.class, () -> {\n            validator.setValidator(\"xX\", 22, \"xX\\\\d{20}\");\n        });\n    }\n\n    @Test\n    public void testSetValidator_InvalidLength() {\n        assertThrows(IllegalArgumentException.class, () -> {\n            validator.setValidator(\"XX\", 35, \"XX\\\\d{20}\");\n        });\n    }\n\n    @Test\n    public void testSetValidator_InvalidFormat() {\n        assertThrows(IllegalArgumentException.class, () -> {\n            validator.setValidator(\"XX\", 22, \"\\\\d{20}\");\n        });\n    }\n}\n"}]