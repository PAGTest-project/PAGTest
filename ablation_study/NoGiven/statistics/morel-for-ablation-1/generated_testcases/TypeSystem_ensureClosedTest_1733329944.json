[{"strategy": "generate", "code": "\npackage net.hydromatic.morel.type;\n\nimport org.junit.jupiter.api.Test;\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\nclass TypeSystem_ensureClosedTest {\n\n    @Test\n    void testEnsureClosedWithNoVars() {\n        TypeSystem ts = new TypeSystem();\n        Type type = mock(Type.class);\n        VariableCollector collector = mock(VariableCollector.class);\n        when(collector.vars).thenReturn(new LinkedHashSet<>());\n        when(type.accept(any(VariableCollector.class))).thenReturn(null);\n\n        Type result = ts.ensureClosed(type);\n\n        assertEquals(type, result);\n    }\n\n    @Test\n    void testEnsureClosedWithVars() {\n        TypeSystem ts = new TypeSystem();\n        Type type = mock(Type.class);\n        VariableCollector collector = mock(VariableCollector.class);\n        TypeVar typeVar = mock(TypeVar.class);\n        when(collector.vars).thenReturn(new LinkedHashSet<TypeVar>() {{ add(typeVar); }});\n        when(type.accept(any(VariableCollector.class))).thenReturn(null);\n        when(type.copy(eq(ts), any())).thenReturn(type);\n\n        Type result = ts.ensureClosed(type);\n\n        assertNotNull(result);\n    }\n}\n"}]