[{"strategy": "retry", "code": "\npackage org.jsoup.nodes;\n\nimport org.jsoup.Connection;\nimport org.jsoup.Jsoup;\nimport org.jsoup.integration.TestServer;\nimport org.jsoup.integration.servlets.CookieServlet;\nimport org.jsoup.integration.servlets.EchoServlet;\nimport org.jsoup.integration.servlets.FileServlet;\nimport org.jsoup.select.Elements;\nimport org.jsoup.select.SelectorTest;\nimport org.junit.jupiter.api.BeforeAll;\nimport org.junit.jupiter.api.Test;\n\nimport java.io.IOException;\nimport java.util.List;\n\nimport static org.junit.jupiter.api.Assertions.*;\n\npublic class FormElement_submitTest {\n\n    private static TestServer server;\n\n    @BeforeAll\n    public static void setUp() throws IOException {\n        server = new TestServer();\n        server.before();\n    }\n\n    @Test\n    public void testSubmitWithAction() throws IOException {\n        final String html = \"<html><body><form action='/submit' method='post'><input name='foo' value='bar'></form></body></html>\";\n        final Document doc = Jsoup.parse(html, \"http://example.com\");\n        final FormElement form = (FormElement) doc.selectFirst(\"form\");\n\n        Connection connection = form.submit();\n        assertEquals(\"http://example.com/submit\", connection.request().url().toString());\n        assertEquals(Connection.Method.POST, connection.request().method());\n    }\n\n    @Test\n    public void testSubmitWithoutAction() throws IOException {\n        final String html = \"<html><body><form method='get'><input name='foo' value='bar'></form></body></html>\";\n        final Document doc = Jsoup.parse(html, \"http://example.com\");\n        final FormElement form = (FormElement) doc.selectFirst(\"form\");\n\n        Connection connection = form.submit();\n        assertEquals(\"http://example.com/\", connection.request().url().toString());\n        assertEquals(Connection.Method.GET, connection.request().method());\n    }\n\n    @Test\n    public void testSubmitWithInvalidAction() {\n        final String html = \"<html><body><form action=''><input name='foo' value='bar'></form></body></html>\";\n        final Document doc = Jsoup.parse(html, \"http://example.com\");\n        final FormElement form = (FormElement) doc.selectFirst(\"form\");\n\n        assertThrows(IllegalArgumentException.class, form::submit);\n    }\n\n    @Test\n    public void testFormData() {\n        final String html = \"<html><body><form><input name='foo' value='bar'><input type='checkbox' name='check' value='1' checked></form></body></html>\";\n        final Document doc = Jsoup.parse(html, \"http://example.com\");\n        final FormElement form = (FormElement) doc.selectFirst(\"form\");\n\n        List<Connection.KeyVal> keyVals = form.formData();\n        assertEquals(2, keyVals.size());\n        assertEquals(\"foo\", keyVals.get(0).key());\n        assertEquals(\"bar\", keyVals.get(0).value());\n        assertEquals(\"check\", keyVals.get(1).key());\n        assertEquals(\"1\", keyVals.get(1).value());\n    }\n}\n"}]