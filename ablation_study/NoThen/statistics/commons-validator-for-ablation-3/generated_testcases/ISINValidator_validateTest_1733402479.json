[{"strategy": "retry", "code": "\npackage org.apache.commons.validator.routines;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.assertNull;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\npublic class ISINValidator_validateTest {\n\n    private static final ISINValidator VALIDATOR_FALSE = ISINValidator.getInstance(false);\n    private static final ISINValidator VALIDATOR_TRUE = ISINValidator.getInstance(true);\n\n    private final String[] validFormat = {\n        \"US0378331005\", // Valid ISIN with valid country code\n        \"AU0000XVGZA3\", // Valid ISIN with valid country code\n        \"GB0002634946\" // Valid ISIN with valid country code\n    };\n\n    private final String[] invalidFormat = {\n        \"US037833100\", // Invalid length\n        \"US03783310055\", // Invalid length\n        \"US037833100A\", // Invalid check digit\n        \"XX0378331005\" // Invalid country code\n    };\n\n    @BeforeEach\n    public void setUp() {\n        // No setup required as ISINValidator is stateless\n    }\n\n    @Test\n    public void testValidateValidISIN() {\n        for (final String f : validFormat) {\n            assertEquals(f, VALIDATOR_FALSE.validate(f));\n        }\n    }\n\n    @Test\n    public void testValidateInvalidISIN() {\n        for (final String f : invalidFormat) {\n            assertNull(VALIDATOR_FALSE.validate(f));\n        }\n    }\n\n    @Test\n    public void testValidateValidISINWithCountryCheck() {\n        for (final String f : validFormat) {\n            assertEquals(f, VALIDATOR_TRUE.validate(f));\n        }\n    }\n\n    @Test\n    public void testValidateInvalidISINWithCountryCheck() {\n        for (final String f : invalidFormat) {\n            assertNull(VALIDATOR_TRUE.validate(f));\n        }\n    }\n\n    @Test\n    public void testValidateInvalidCountryCode() {\n        final String invalidCountryCodeISIN = \"XX0378331005\";\n        assertNull(VALIDATOR_TRUE.validate(invalidCountryCodeISIN));\n    }\n}\n"}]