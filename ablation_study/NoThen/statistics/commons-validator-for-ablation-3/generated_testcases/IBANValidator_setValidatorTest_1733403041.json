[{"strategy": "retry", "code": "\npackage org.apache.commons.validator.routines;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\nimport static org.junit.jupiter.api.Assertions.assertNull;\nimport static org.junit.jupiter.api.Assertions.assertThrows;\nimport static org.junit.jupiter.api.Assertions.assertTrue;\n\nimport org.apache.commons.validator.routines.IBANValidator.Validator;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\npublic class IBANValidator_setValidatorTest {\n\n    private IBANValidator ibanValidator;\n\n    @BeforeEach\n    public void setUp() {\n        ibanValidator = new IBANValidator();\n    }\n\n    @Test\n    public void testSetValidatorSuccess() {\n        Validator validator = ibanValidator.setValidator(\"XX\", 22, \"XX\\\\d{20}\");\n        assertNotNull(validator);\n        Validator retrievedValidator = ibanValidator.getValidator(\"XX\");\n        assertNotNull(retrievedValidator);\n        assertEquals(22, retrievedValidator.getIbanLength());\n    }\n\n    @Test\n    public void testSetValidatorRemove() {\n        ibanValidator.setValidator(\"XX\", 22, \"XX\\\\d{20}\");\n        Validator removedValidator = ibanValidator.setValidator(\"XX\", -1, null);\n        assertNotNull(removedValidator);\n        Validator retrievedValidator = ibanValidator.getValidator(\"XX\");\n        assertNull(retrievedValidator);\n    }\n\n    @Test\n    public void testSetValidatorSingletonModification() {\n        IBANValidator defaultValidator = IBANValidator.getInstance();\n        assertThrows(IllegalStateException.class, () -> {\n            defaultValidator.setValidator(\"XX\", 22, \"XX\\\\d{20}\");\n        });\n    }\n\n    @Test\n    public void testSetValidatorInvalidCountryCode() {\n        assertThrows(IllegalArgumentException.class, () -> {\n            ibanValidator.setValidator(\"x1\", 22, \"x1\\\\d{20}\");\n        });\n    }\n\n    @Test\n    public void testSetValidatorInvalidLength() {\n        assertThrows(IllegalArgumentException.class, () -> {\n            ibanValidator.setValidator(\"XX\", 35, \"XX\\\\d{20}\");\n        });\n    }\n\n    @Test\n    public void testSetValidatorInvalidFormat() {\n        assertThrows(IllegalArgumentException.class, () -> {\n            ibanValidator.setValidator(\"XX\", 22, \"\\\\d{20}\");\n        });\n    }\n}\n"}]