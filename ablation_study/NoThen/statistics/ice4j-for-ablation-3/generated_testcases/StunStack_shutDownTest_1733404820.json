[{"strategy": "generate", "code": "\npackage org.ice4j.stack;\n\nimport org.ice4j.StunClientTransaction;\nimport org.ice4j.StunServerTransaction;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.Mockito;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Hashtable;\n\nimport static org.mockito.Mockito.*;\n\npublic class StunStack_shutDownTest {\n\n    @Test\n    public void testShutDown() {\n        // Given\n        StunStack stunStack = new StunStack();\n        stunStack.eventDispatcher = mock(EventDispatcher.class);\n        stunStack.netAccessManager = mock(NetAccessManager.class);\n        stunStack.expiredTransactionsCollector = mock(StunStack.ExpiredServerTransactionsCollector.class);\n\n        Hashtable<TransactionID, StunClientTransaction> clientTransactions = new Hashtable<>();\n        StunClientTransaction clientTransaction = mock(StunClientTransaction.class);\n        clientTransactions.put(mock(TransactionID.class), clientTransaction);\n        stunStack.clientTransactions = clientTransactions;\n\n        Hashtable<TransactionID, StunServerTransaction> serverTransactions = new Hashtable<>();\n        StunServerTransaction serverTransaction = mock(StunServerTransaction.class);\n        serverTransactions.put(mock(TransactionID.class), serverTransaction);\n        stunStack.serverTransactions = serverTransactions;\n\n        // When\n        stunStack.shutDown();\n\n        // Then\n        verify(stunStack.eventDispatcher).removeAllListeners();\n        verify(clientTransaction).cancel();\n        verify(serverTransaction).expire();\n        verify(stunStack.expiredTransactionsCollector).cancel();\n        verify(stunStack.netAccessManager).stop();\n    }\n}\n"}]