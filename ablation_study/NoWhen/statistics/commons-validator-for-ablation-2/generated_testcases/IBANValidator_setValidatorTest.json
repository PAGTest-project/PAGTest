[{"strategy": "retry", "code": "\npackage org.apache.commons.validator.routines;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.apache.commons.validator.Validator;\n\npublic class IBANValidator_setValidatorTest {\n\n    private IBANValidator validator;\n\n    @BeforeEach\n    public void setUp() {\n        validator = new IBANValidator();\n    }\n\n    @Test\n    public void testSetValidator_SingletonModification() {\n        assertThrows(IllegalStateException.class, () -> {\n            IBANValidator.DEFAULT_IBAN_VALIDATOR.setValidator(\"GB\", 22, \"GB\\\\d{2}[A-Z]{4}\\\\d{14}\");\n        });\n    }\n\n    @Test\n    public void testSetValidator_ValidInput() {\n        IBANValidator.Validator newValidator = new IBANValidator.Validator(\"GB\", 22, \"GB\\\\d{2}[A-Z]{4}\\\\d{14}\");\n        IBANValidator.Validator oldValidator = validator.setValidator(\"GB\", 22, \"GB\\\\d{2}[A-Z]{4}\\\\d{14}\");\n        assertNotNull(oldValidator);\n        assertEquals(newValidator.getIbanLength(), validator.getValidator(\"GB\").getIbanLength());\n    }\n\n    @Test\n    public void testSetValidator_RemoveValidator() {\n        IBANValidator.Validator oldValidator = validator.setValidator(\"GB\", -1, null);\n        assertNotNull(oldValidator);\n        assertNull(validator.getValidator(\"GB\"));\n    }\n\n    @Test\n    public void testSetValidator_InvalidCountryCode() {\n        assertThrows(IllegalArgumentException.class, () -> {\n            validator.setValidator(\"gb\", 22, \"gb\\\\d{2}[A-Z]{4}\\\\d{14}\");\n        });\n    }\n\n    @Test\n    public void testSetValidator_InvalidLength() {\n        assertThrows(IllegalArgumentException.class, () -> {\n            validator.setValidator(\"GB\", 35, \"GB\\\\d{2}[A-Z]{4}\\\\d{14}\");\n        });\n    }\n\n    @Test\n    public void testSetValidator_InvalidFormat() {\n        assertThrows(IllegalArgumentException.class, () -> {\n            validator.setValidator(\"GB\", 22, \"GB\\\\d{2}[A-Z]{4}\\\\d{14}X\");\n        });\n    }\n}\n"}]