[{"strategy": "generate", "code": "\npackage org.ice4j.stack;\n\nimport org.junit.jupiter.api.Test;\nimport org.mockito.Mockito;\n\nimport java.util.ArrayList;\nimport java.util.Hashtable;\n\nimport static org.mockito.Mockito.*;\n\npublic class StunStack_shutDownTest {\n\n    @Test\n    public void testShutDown() {\n        // Given\n        StunStack stunStack = new StunStack();\n        stunStack.clientTransactions = new Hashtable<>();\n        stunStack.serverTransactions = new Hashtable<>();\n\n        StunClientTransaction clientTransaction = mock(StunClientTransaction.class);\n        StunServerTransaction serverTransaction = mock(StunServerTransaction.class);\n\n        stunStack.clientTransactions.put(mock(TransactionID.class), clientTransaction);\n        stunStack.serverTransactions.put(mock(TransactionID.class), serverTransaction);\n\n        stunStack.expiredTransactionsCollector = mock(ExpiredServerTransactionsCollector.class);\n        stunStack.netAccessManager = mock(NetAccessManager.class);\n\n        // When\n        stunStack.shutDown();\n\n        // Then\n        verify(stunStack.eventDispatcher).removeAllListeners();\n        verify(clientTransaction).cancel();\n        verify(serverTransaction).expire();\n        verify(stunStack.expiredTransactionsCollector).cancel();\n        verify(stunStack.netAccessManager).stop();\n    }\n}\n"}]