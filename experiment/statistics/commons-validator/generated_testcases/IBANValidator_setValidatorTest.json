[{"strategy": "retry", "code": "\npackage org.apache.commons.validator.routines;\n\nimport org.apache.commons.validator.Validator;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport static org.junit.jupiter.api.Assertions.*;\n\npublic class IBANValidator_setValidatorTest {\n\n    private IBANValidator validator;\n\n    @BeforeEach\n    public void setUp() {\n        validator = new IBANValidator();\n    }\n\n    @Test\n    public void testSetValidator_SingletonModification() {\n        IBANValidator defaultValidator = IBANValidator.getInstance();\n        assertThrows(IllegalStateException.class, () -> {\n            defaultValidator.setValidator(\"DE\", 22, \"DE\\\\d{20}\");\n        });\n    }\n\n    @Test\n    public void testSetValidator_ValidInput() {\n        org.apache.commons.validator.routines.IBANValidator.Validator result = validator.setValidator(\"DE\", 22, \"DE\\\\d{20}\");\n        assertNull(result); // No previous validator for \"DE\"\n\n        org.apache.commons.validator.routines.IBANValidator.Validator newValidator = validator.getValidator(\"DE\");\n        assertNotNull(newValidator);\n        assertEquals(\"DE\", newValidator.countryCode);\n        assertEquals(22, newValidator.ibanLength);\n    }\n\n    @Test\n    public void testSetValidator_RemoveValidator() {\n        validator.setValidator(\"DE\", 22, \"DE\\\\d{20}\");\n        org.apache.commons.validator.routines.IBANValidator.Validator result = validator.setValidator(\"DE\", -1, null);\n        assertNotNull(result); // Previous validator for \"DE\" should be returned\n\n        org.apache.commons.validator.routines.IBANValidator.Validator removedValidator = validator.getValidator(\"DE\");\n        assertNull(removedValidator);\n    }\n}\n"}]