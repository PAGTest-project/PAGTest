[{"strategy": "retry", "code": "\npackage com.github.davidmoten.rtree;\n\nimport org.junit.Before;\nimport org.junit.Test;\nimport java.awt.image.BufferedImage;\nimport java.util.Optional;\nimport static org.junit.Assert.*;\nimport static org.mockito.Mockito.*;\n\npublic class Visualizer_createImageTest {\n\n    private Visualizer visualizer;\n    private RTree<?, Geometry> tree;\n    private Node<?, Geometry> rootNode;\n\n    @Before\n    public void setUp() {\n        tree = mock(RTree.class);\n        rootNode = mock(Node.class);\n        when(tree.root()).thenReturn(Optional.of(rootNode));\n        visualizer = new Visualizer(tree, 100, 100, mock(Rectangle.class));\n    }\n\n    @Test\n    public void testCreateImageWithRootNode() {\n        // Given\n        when(rootNode.geometry()).thenReturn(mock(Geometry.class));\n\n        // When\n        BufferedImage image = visualizer.createImage();\n\n        // Then\n        assertNotNull(image);\n        assertEquals(100, image.getWidth());\n        assertEquals(100, image.getHeight());\n    }\n\n    @Test\n    public void testCreateImageWithoutRootNode() {\n        // Given\n        when(tree.root()).thenReturn(Optional.empty());\n\n        // When\n        BufferedImage image = visualizer.createImage();\n\n        // Then\n        assertNotNull(image);\n        assertEquals(100, image.getWidth());\n        assertEquals(100, image.getHeight());\n    }\n}\n"}]