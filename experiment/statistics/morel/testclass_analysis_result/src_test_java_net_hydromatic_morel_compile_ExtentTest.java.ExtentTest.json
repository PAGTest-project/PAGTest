{"file_path": "src/test/java/net/hydromatic/morel/compile/ExtentTest.java", "testclass_name": "ExtentTest", "dependencies": ["package net.hydromatic.morel.compile;", "import net.hydromatic.morel.ast.Core;", "import net.hydromatic.morel.ast.FromBuilder;", "import net.hydromatic.morel.type.ListType;", "import net.hydromatic.morel.type.PrimitiveType;", "import net.hydromatic.morel.type.RecordLikeType;", "import net.hydromatic.morel.type.RecordType;", "import net.hydromatic.morel.type.TypeSystem;", "import net.hydromatic.morel.util.ImmutablePairList;", "import net.hydromatic.morel.util.PairList;", "import com.google.common.collect.ImmutableList;", "import com.google.common.collect.ImmutableSet;", "import com.google.common.collect.ImmutableSortedMap;", "import org.junit.jupiter.api.Test;", "import java.math.BigDecimal;", "import java.util.List;", "import java.util.function.BiConsumer;", "import java.util.function.Consumer;", "import static net.hydromatic.morel.ast.CoreBuilder.core;", "import static org.apache.calcite.linq4j.tree.Expressions.list;", "import static org.hamcrest.CoreMatchers.instanceOf;", "import static org.hamcrest.CoreMatchers.notNullValue;", "import static org.hamcrest.MatcherAssert.assertThat;", "import static org.hamcrest.Matchers.anEmptyMap;", "import static org.hamcrest.Matchers.empty;", "import static org.hamcrest.Matchers.hasSize;", "import static org.hamcrest.Matchers.hasToString;", "import static org.hamcrest.core.Is.is;"], "name": "ExtentTest", "description": "Tests for the Extent class, focusing on various expression analysis and extent calculations.", "class_members": {"variables": [], "methods": [], "nested_classes": [{"name": "Fixture", "description": "Internal helper class providing setup and utility methods for tests."}]}, "fixtures": [], "test_cases": [{"name": "testConstant", "primary_tested": ["Core.Exp#isConstant()"], "associated_methods": ["Fixture.intLiteral(int)", "Core.intLiteral(BigDecimal)", "Core.boolLiteral(boolean)", "Core.charLiteral(char)", "Core.realLiteral(float)", "Core.stringLiteral(String)", "Core.tuple(TypeSystem,Type,List<Core.Exp>)", "Core.record(TypeSystem,PairList<String,Core.Exp>)", "PairList.rightList()"], "external_dependencies": {"modules": ["Core", "TypeSystem", "PairList", "BigDecimal"], "class_members": [{"name": "Fixture", "type": "nested_class"}], "project_specific_resources": []}, "category": "unit", "fixtures_used": [], "description": "Tests whether an expression is constant."}, {"name": "testEq", "primary_tested": ["Core.equal(TypeSystem,Core.Exp,Core.Exp)"], "associated_methods": ["Fixture.intLiteral(int)", "Core.idPat(Type,String,int)", "Core.id(Core.IdPat)", "Fixture.extent(Core.Pat,Core.Exp)"], "external_dependencies": {"modules": ["Core", "TypeSystem", "PrimitiveType"], "class_members": [{"name": "Fixture", "type": "nested_class"}], "project_specific_resources": []}, "category": "unit", "fixtures_used": [], "description": "Tests a variable assigned a single value."}, {"name": "testBetween", "primary_tested": ["Core.andAlso(TypeSystem,Core.Exp,Core.Exp)", "Core.greaterThanOrEqualTo(TypeSystem,Core.Exp,Core.Exp)", "Core.lessThan(TypeSystem,Core.Exp,Core.Exp)", "Core.notEqual(TypeSystem,Core.Exp,Core.Exp)"], "associated_methods": ["Fixture.intLiteral(int)", "Core.idPat(Type,String,int)", "Core.id(Core.IdPat)", "Fixture.extent(Core.Pat,Core.Exp)"], "external_dependencies": {"modules": ["Core", "TypeSystem", "PrimitiveType", "BigDecimal"], "class_members": [{"name": "Fixture", "type": "nested_class"}], "project_specific_resources": []}, "category": "unit", "fixtures_used": [], "description": "Tests the extent calculation for a variable within a range and other conditions."}, {"name": "testSubTrue", "primary_tested": ["Core.andAlso(TypeSystem,Core.Exp,Core.Exp)", "Core.orElse(TypeSystem,Core.Exp,Core.Exp)"], "associated_methods": ["Fixture.checkSubTrue(Core.Exp,List<Core.Exp>,String)", "Core.intLiteral(BigDecimal)", "Core.id(Core.IdPat)"], "external_dependencies": {"modules": ["Core", "TypeSystem", "BigDecimal"], "class_members": [{"name": "Fixture", "type": "nested_class"}], "project_specific_resources": []}, "category": "unit", "fixtures_used": [], "description": "Tests the subTrue method for expression simplification."}, {"name": "testFlatten", "primary_tested": ["Core.andAlso(TypeSystem,Core.Exp,Core.Exp)", "Core.orElse(TypeSystem,Core.Exp,Core.Exp)"], "associated_methods": ["Fixture.checkFlatten(Core.Exp,String,String)", "Core.intLiteral(BigDecimal)", "Core.id(Core.IdPat)"], "external_dependencies": {"modules": ["Core", "TypeSystem", "BigDecimal"], "class_members": [{"name": "Fixture", "type": "nested_class"}], "project_specific_resources": []}, "category": "unit", "fixtures_used": [], "description": "Tests the flattening of AND and OR expressions."}, {"name": "testAnalysis2c", "primary_tested": ["FromBuilder.where(Core.Exp)", "Core.elem(TypeSystem,Core.Exp,Core.Exp)", "Core.greaterThan(TypeSystem,Core.Exp,Core.Exp)"], "associated_methods": ["Fixture.extent(Core.Pat,Core.Exp)", "Core.tuplePat(TypeSystem,List<Core.Pat>)", "Core.idPat(Type,String,int)", "Core.id(Core.IdPat)", "Core.record(TypeSystem,PairList<String,Core.Exp>)", "Core.intLiteral(BigDecimal)", "Core.stringLiteral(String)", "FromBuilder.scan(Core.Pat)", "FromBuilder.build()"], "external_dependencies": {"modules": ["Core", "TypeSystem", "PrimitiveType", "BigDecimal", "FromBuilder", "PairList"], "class_members": [{"name": "Fixture", "type": "nested_class"}], "project_specific_resources": []}, "category": "unit", "fixtures_used": [], "description": "Tests the analysis of a complex expression involving element checks and greater than conditions."}, {"name": "testAnalysis2d", "primary_tested": ["FromBuilder.where(Core.Exp)", "Core.elem(TypeSystem,Core.Exp,Core.Exp)", "Core.greaterThan(TypeSystem,Core.Exp,Core.Exp)"], "associated_methods": ["Fixture.extent(Core.Pat,Core.Exp)", "Core.tuplePat(TypeSystem,List<Core.Pat>)", "Core.idPat(Type,String,int)", "Core.id(Core.IdPat)", "Core.record(TypeSystem,PairList<String,Core.Exp>)", "Core.intLiteral(BigDecimal)", "Core.stringLiteral(String)", "FromBuilder.scan(Core.Pat)", "FromBuilder.build()"], "external_dependencies": {"modules": ["Core", "TypeSystem", "PrimitiveType", "BigDecimal", "FromBuilder", "PairList"], "class_members": [{"name": "Fixture", "type": "nested_class"}], "project_specific_resources": []}, "category": "unit", "fixtures_used": [], "description": "Tests the analysis of a complex expression involving element checks, greater than conditions, and string literals."}]}